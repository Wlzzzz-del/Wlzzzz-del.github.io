<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>linux下搭建v2ray科学上网</title>
    <link href="/2020/10/01/linux%E4%B8%8B%E6%90%AD%E5%BB%BAv2ray%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    <url>/2020/10/01/linux%E4%B8%8B%E6%90%AD%E5%BB%BAv2ray%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/</url>
    
    <content type="html"><![CDATA[<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>寒假配置了一台manjaro，但是由于同性交友网站GitHub经常进不去，包括wget一些代码时速度很慢，为了更加方便地上网，特地配置v2ray。</p><h1 id="wget-v2ray和Qv2ray"><a href="#wget-v2ray和Qv2ray" class="headerlink" title="wget v2ray和Qv2ray"></a>wget v2ray和Qv2ray</h1><pre><code class="hljs apache"><span class="hljs-comment"># v2ray</span><span class="hljs-attribute">wget</span> https://github.com/v<span class="hljs-number">2</span>ray/v<span class="hljs-number">2</span>ray-core/releases/download/v<span class="hljs-number">4</span>.<span class="hljs-number">27</span>.<span class="hljs-number">0</span>/v<span class="hljs-number">2</span>ray-linux-<span class="hljs-number">64</span>.zip<span class="hljs-comment"># Qv2ray</span><span class="hljs-attribute">wget</span> https://github.com/Qv<span class="hljs-number">2</span>ray/Qv<span class="hljs-number">2</span>ray/releases/download/v<span class="hljs-number">2</span>.<span class="hljs-number">6</span>.<span class="hljs-number">3</span>/Qv<span class="hljs-number">2</span>ray.v<span class="hljs-number">2</span>.<span class="hljs-number">6</span>.<span class="hljs-number">3</span>.linux-x<span class="hljs-number">64</span>.AppImage</code></pre><h1 id="解压v2ray"><a href="#解压v2ray" class="headerlink" title="解压v2ray"></a>解压v2ray</h1><pre><code class="hljs apache"><span class="hljs-attribute">unzip</span> v<span class="hljs-number">2</span>ray-linux-<span class="hljs-number">64</span>.zip</code></pre><h1 id="添加运行权限然后运行v2ray"><a href="#添加运行权限然后运行v2ray" class="headerlink" title="添加运行权限然后运行v2ray"></a>添加运行权限然后运行v2ray</h1><pre><code class="hljs stylus">chmod +x Qv2ray<span class="hljs-selector-class">.v2</span>.<span class="hljs-number">6.3</span><span class="hljs-selector-class">.linux-x64</span>.AppImage./Qv2ray<span class="hljs-selector-class">.v2</span>.<span class="hljs-number">6.3</span><span class="hljs-selector-class">.linux-x64</span>.AppImage</code></pre><h1 id="配置文件路径"><a href="#配置文件路径" class="headerlink" title="配置文件路径"></a>配置文件路径</h1><p>进入首选项-内核设置配置可执行文件路径和资源目录<br><img src="http://i1.fuimg.com/727535/c9a84b002850edf1.png" alt="配置文件路径" title="配置文件路径"></p><h1 id="添加订阅链接"><a href="#添加订阅链接" class="headerlink" title="添加订阅链接"></a>添加订阅链接</h1><p><img src="http://i1.fuimg.com/727535/cfd65aa4dc5b05c9.png" alt="添加订阅链接" title="添加订阅链接"></p><h1 id="error"><a href="#error" class="headerlink" title="error!"></a>error!</h1><p>出现如下错误修改系统时间即可<br><img src="http://i1.fuimg.com/727535/180ec11a9237f147.png" alt="出现错误" title="error"></p><pre><code class="hljs css"><span class="hljs-selector-tag">sudo</span> <span class="hljs-selector-tag">date</span> <span class="hljs-selector-tag">-s</span> &quot;20201001 08<span class="hljs-selector-pseudo">:23</span><span class="hljs-selector-pseudo">:00&quot;</span> <span class="hljs-selector-id">#yyyymmdd</span> <span class="hljs-selector-tag">hh</span><span class="hljs-selector-pseudo">:mm</span><span class="hljs-selector-pseudo">:ss</span></code></pre><p><img src="http://i1.fuimg.com/727535/bdaeb72edc736f1c.png" alt="修改系统时间" title="修改系统时间"></p><h1 id="alias-添加快速启动命令"><a href="#alias-添加快速启动命令" class="headerlink" title="alias 添加快速启动命令"></a>alias 添加快速启动命令</h1><pre><code class="hljs apache"><span class="hljs-attribute">alias</span> vpn /home/wlz/qv<span class="hljs-number">2</span>ray/Qv<span class="hljs-number">2</span>ray.v<span class="hljs-number">2</span>.<span class="hljs-number">6</span>.<span class="hljs-number">3</span>.linux-x<span class="hljs-number">64</span>.AppImage<span class="hljs-attribute">funcsave</span> vpn</code></pre><p><img src="http://i1.fuimg.com/727535/d71e145da34b8266.png" alt="配置启动命令" title="配置启动命令"></p>]]></content>
    
    
    
    <tags>
      
      <tag>工作</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>中秋快乐</title>
    <link href="/2020/09/30/%E4%B8%AD%E7%A7%8B%E5%BF%AB%E4%B9%90/"/>
    <url>/2020/09/30/%E4%B8%AD%E7%A7%8B%E5%BF%AB%E4%B9%90/</url>
    
    <content type="html"><![CDATA[<h1 id="中秋快乐！"><a href="#中秋快乐！" class="headerlink" title="中秋快乐！"></a>中秋快乐！</h1><h2 id="今天一天都是关于吃的"><a href="#今天一天都是关于吃的" class="headerlink" title="今天一天都是关于吃的"></a>今天一天都是关于吃的</h2><p><img src="http://i1.fuimg.com/727535/7cc0d79779491baa.jpg" alt="学姐剥的柚子和送的月饼" title="食物.1"><br>学姐剥的柚子和送的月饼，很感谢学姐！<br><img src="http://i1.fuimg.com/727535/b787c1669b303b70.jpg" alt="老妈寄的月饼" title="食物.2"><br>老妈寄的月饼，超级感动！<br><img src="http://i1.fuimg.com/727535/5389629798323fe1.jpg" alt="舍友妈妈寄的炒肉" title="食物.3"><br>舍友妈妈寄的炒肉，肉干是炒好后然后真空封装的，超nice</p><p>然后就是祝xdm节日快乐，中秋国庆假期快乐！</p>]]></content>
    
    
    
    <tags>
      
      <tag>生活</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2020.9.29</title>
    <link href="/2020/09/29/2020-9-29/"/>
    <url>/2020/09/29/2020-9-29/</url>
    
    <content type="html"><![CDATA[<p>只知道昨晚下了一夜的雨，昨晚不知不觉中盖了两条被子，早上一觉起来看一眼天气预报，剩下十二度。<br><img src="http://i2.tiimg.com/727535/1f310dc131872691.png" alt="天气" title="天气"><br>昨天还在短袖短裤，今天就该换上秋裤了。</p>]]></content>
    
    
    
    <tags>
      
      <tag>生活</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>networkx复杂网络基本操作</title>
    <link href="/2020/09/27/networkx%E5%A4%8D%E6%9D%82%E7%BD%91%E7%BB%9C%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"/>
    <url>/2020/09/27/networkx%E5%A4%8D%E6%9D%82%E7%BD%91%E7%BB%9C%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/</url>
    
    <content type="html"><![CDATA[<p>从寒假开始到疫情结束一直在帮研究生搞复杂网络的算法，因此学习了networkx用于写算法，在这篇博文下整理一些networkx的基本操作</p><h1 id="networkx基本操作"><a href="#networkx基本操作" class="headerlink" title="networkx基本操作"></a>networkx基本操作</h1><h2 id="导入数据集"><a href="#导入数据集" class="headerlink" title="导入数据集"></a>导入数据集</h2><p>导入.gml格式的数据集</p><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">G</span>.</span></span>read<span class="hljs-constructor">_gml()</span></code></pre><p>导入.txt格式的数据集</p><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">G</span>.</span></span>read<span class="hljs-constructor">_edgelist()</span></code></pre><p>导入karate_club数据集（networkx自带）</p><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">G</span>.</span></span>karate<span class="hljs-constructor">_club_graph()</span></code></pre><h2 id="点和边的操作"><a href="#点和边的操作" class="headerlink" title="点和边的操作"></a>点和边的操作</h2><p>输出点的数量</p><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">G</span>.</span></span>number<span class="hljs-constructor">_of_nodes()</span></code></pre><p>输出边的数量</p><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">G</span>.</span></span>number<span class="hljs-constructor">_of_edges()</span></code></pre><p>输出全部点的信息</p><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">G</span>.</span></span>nodes<span class="hljs-literal">()</span></code></pre><p>输出全部边的信息</p><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">G</span>.</span></span>edges<span class="hljs-literal">()</span></code></pre><p>在图中添加一个点</p><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">G</span>.</span></span>add<span class="hljs-constructor">_node(34)</span></code></pre><p>在图中添加一条边</p><pre><code class="hljs reasonml"><span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">G</span>.</span></span>add<span class="hljs-constructor">_edge(1,3)</span></code></pre><p>输出某个点的邻居节点</p><pre><code class="hljs angelscript">G[<span class="hljs-number">34</span>]</code></pre><p>使用遍历输出所有点的邻居数量</p><pre><code class="hljs matlab"><span class="hljs-keyword">for</span> <span class="hljs-built_in">i</span> in G.nodes():  print(<span class="hljs-built_in">i</span>,<span class="hljs-string">&#x27;的数量为&#x27;</span>,len(G[<span class="hljs-built_in">i</span>]))</code></pre><h2 id="画图操作"><a href="#画图操作" class="headerlink" title="画图操作"></a>画图操作</h2><p>networkx画图操作依托于matplotlib，因此matplotlib设置的参数对nx.draw()都有效</p><pre><code class="hljs angelscript"><span class="hljs-keyword">from</span> matplotlib <span class="hljs-keyword">import</span> pyplot as pyplotplt.figure(figsize=(<span class="hljs-number">10</span>,<span class="hljs-number">8</span>))# 定义图片的大小nx.draw(G)plt.show()</code></pre><p>如下图画出了karate的拓扑图<br><img src="http://i1.fuimg.com/727535/bc6dfba58eb1265a.png" alt="karate" title="karate拓扑结构.1"></p><pre><code class="hljs 1c">nx.draw(G,node_color=&#x27;r&#x27;,edge_color=&#x27;b&#x27;)<span class="hljs-meta">#指定点和边的颜色</span></code></pre><p><img src="http://i1.fuimg.com/727535/40e48e4e44925b81.png" alt="karate" title="karate拓扑结构.2"></p><pre><code class="hljs nix"><span class="hljs-comment"># 使用Kernighan–Lin算法将图划分为两个块</span><span class="hljs-attr">a=kernighan_lin_bisection(G)#</span> 运行算法<span class="hljs-attr">pos</span> = nx.spring_layout(G)<span class="hljs-comment"># 对节点布局进行美化</span><span class="hljs-comment"># 分别画出两组社区的节点分布</span>nx.draw(G,<span class="hljs-attr">pos</span> = pos, <span class="hljs-attr">nodelist</span> = a[<span class="hljs-number">0</span>], <span class="hljs-attr">node_color</span> = &#x27;blue&#x27;,<span class="hljs-attr">node_size=100)</span>nx.draw(G,<span class="hljs-attr">pos</span> = pos, <span class="hljs-attr">nodelist</span> = a[<span class="hljs-number">1</span>], <span class="hljs-attr">node_color</span> = &#x27;red&#x27;,<span class="hljs-attr">node_size=100)</span></code></pre><p><img src="http://i2.tiimg.com/727535/f7135e3a3a576499.png" alt="karate" title="karate拓扑结构.3"></p><h2 id="生成其他特殊图"><a href="#生成其他特殊图" class="headerlink" title="生成其他特殊图"></a>生成其他特殊图</h2><pre><code class="hljs ini"><span class="hljs-attr">G</span> = nx.scale_free_graph(<span class="hljs-number">100</span>)<span class="hljs-comment"># 生成无标度网络</span><span class="hljs-attr">H</span>=nx.watts_strogatz_graph(<span class="hljs-number">50</span>,<span class="hljs-number">5</span>,<span class="hljs-number">0.3</span>)<span class="hljs-comment"># 生成小世界</span></code></pre><h2 id="导出到-gml格式"><a href="#导出到-gml格式" class="headerlink" title="导出到.gml格式"></a>导出到.gml格式</h2><pre><code class="hljs less"><span class="hljs-selector-tag">nx</span><span class="hljs-selector-class">.write_gml</span>(G,<span class="hljs-string">&#x27;./9.txt&#x27;</span>)</code></pre><h2 id="其他详细方法参考networkx文档"><a href="#其他详细方法参考networkx文档" class="headerlink" title="其他详细方法参考networkx文档"></a>其他详细方法参考networkx文档</h2><p><a href="https://www.osgeo.cn/networkx/" title="networkx文档">networkx文档</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>工作</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>大数据课程设计-spark环境搭建以及实现决策树学习</title>
    <link href="/2020/09/27/%E5%A4%A7%E6%95%B0%E6%8D%AE%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1-spark%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%8F%8A%E5%AE%9E%E7%8E%B0%E5%86%B3%E7%AD%96%E6%A0%91%E5%AD%A6%E4%B9%A0/"/>
    <url>/2020/09/27/%E5%A4%A7%E6%95%B0%E6%8D%AE%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1-spark%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%8F%8A%E5%AE%9E%E7%8E%B0%E5%86%B3%E7%AD%96%E6%A0%91%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<p>学期初大数据课程老师要求仿照林子雨老师的教材使用spark编写程序，本想随便画两张图草草了事，但最后还是认真地做了。<br>有趣的是答辩的时候，有四组的作品和林子雨老师教材的例子一模一样，这大概就是糊弄学的典范吧。</p><h1 id="大数据课程设计-spark环境搭建以及实现决策树学习"><a href="#大数据课程设计-spark环境搭建以及实现决策树学习" class="headerlink" title="大数据课程设计-spark环境搭建以及实现决策树学习"></a>大数据课程设计-spark环境搭建以及实现决策树学习</h1><h2 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h2><p>使用manjaro、java 1.8、hadoop 2.9.2、 python 3.8<br>以及安装了mysql，此处不作展示<br><img src="http://i2.tiimg.com/727535/c365b9369065e880.png" alt="Python和Spark版本信息" title="环境信息.1"><br><img src="http://i2.tiimg.com/727535/b675ac7983d26423.png" alt="JDK和Hadoop版本信息" title="环境信息.2"><br>spark可以独立于hadoop运行（hadoop配置是真的麻烦），并且本课设采用的是pyspark编程，pyspark需要python3.x以上的版本</p><h2 id="数据集"><a href="#数据集" class="headerlink" title="数据集"></a>数据集</h2><p><img src="http://i1.fuimg.com/727535/4c77207b47be0bb1.png" alt="数据集" title="数据集.1"><br>数据集采用国民经济核算季度数据，CPI为国家人均消费指数，指数越高说明消费水平越高，接下来将使用pyspark的ml模块的决策树模型进行训练和测试</p><h2 id="数据处理"><a href="#数据处理" class="headerlink" title="数据处理"></a>数据处理</h2><pre><code class="hljs python"><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">    导入必要的模块</span><span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-keyword">from</span> pyspark.sql <span class="hljs-keyword">import</span> SparkSession<span class="hljs-keyword">from</span> pyspark.ml.feature <span class="hljs-keyword">import</span> VectorAssembler<span class="hljs-keyword">from</span> pyspark.ml.regression <span class="hljs-keyword">import</span> DecisionTreeRegressor<span class="hljs-keyword">from</span> pyspark.ml.evaluation <span class="hljs-keyword">import</span> RegressionEvaluator</code></pre><p>SparkSession 是 spark2.x 引入的新概念，SparkSession 为用户提供统一的切入点，字面理解是创建会话，或者连接 spark<br>VectorAssembler 将多列数据转换为单列的向量列并统一命名，完成特征向量提取<br>DecisionTreeRegressor 为决策树模型模块，包含了初始化训练测试等方法<br>RegressionEvaluator 用于对模型进行评估</p><pre><code class="hljs ini"><span class="hljs-attr">spark</span> = SparkSession.builder.appName(<span class="hljs-string">&#x27;learn_regression&#x27;</span>).master(<span class="hljs-string">&#x27;local[1]&#x27;</span>).getOrCreate()<span class="hljs-attr">dataset_path</span> = <span class="hljs-string">&#x27;./data/datat.csv&#x27;</span><span class="hljs-attr">df</span> = spark.read.csv(dataset_path)</code></pre><p>读取数据集并且创建本地spark会话</p><pre><code class="hljs reasonml">df = df.<span class="hljs-keyword">with</span><span class="hljs-constructor">Column(&#x27;<span class="hljs-params">_c1</span>&#x27;,<span class="hljs-params">df</span>.<span class="hljs-params">_c1</span>.<span class="hljs-params">astype</span>(<span class="hljs-string">&quot;float&quot;</span>)</span>)df = df.<span class="hljs-keyword">with</span><span class="hljs-constructor">Column(&#x27;<span class="hljs-params">_c2</span>&#x27;,<span class="hljs-params">df</span>.<span class="hljs-params">_c2</span>.<span class="hljs-params">astype</span>(<span class="hljs-string">&quot;float&quot;</span>)</span>)df = df.<span class="hljs-keyword">with</span><span class="hljs-constructor">Column(&#x27;<span class="hljs-params">_c3</span>&#x27;,<span class="hljs-params">df</span>.<span class="hljs-params">_c3</span>.<span class="hljs-params">astype</span>(<span class="hljs-string">&quot;float&quot;</span>)</span>)df = df.<span class="hljs-keyword">with</span><span class="hljs-constructor">Column(&#x27;<span class="hljs-params">_c4</span>&#x27;,<span class="hljs-params">df</span>.<span class="hljs-params">_c4</span>.<span class="hljs-params">astype</span>(<span class="hljs-string">&quot;float&quot;</span>)</span>)df = df.<span class="hljs-keyword">with</span><span class="hljs-constructor">Column(&#x27;<span class="hljs-params">_c5</span>&#x27;,<span class="hljs-params">df</span>.<span class="hljs-params">_c5</span>.<span class="hljs-params">astype</span>(<span class="hljs-string">&quot;float&quot;</span>)</span>)df = df.<span class="hljs-keyword">with</span><span class="hljs-constructor">Column(&#x27;<span class="hljs-params">_c6</span>&#x27;,<span class="hljs-params">df</span>.<span class="hljs-params">_c6</span>.<span class="hljs-params">astype</span>(<span class="hljs-string">&quot;float&quot;</span>)</span>)df = df.<span class="hljs-keyword">with</span><span class="hljs-constructor">Column(&#x27;<span class="hljs-params">_c7</span>&#x27;,<span class="hljs-params">df</span>.<span class="hljs-params">_c7</span>.<span class="hljs-params">astype</span>(<span class="hljs-string">&quot;float&quot;</span>)</span>)df = df.<span class="hljs-keyword">with</span><span class="hljs-constructor">Column(&#x27;<span class="hljs-params">_c8</span>&#x27;,<span class="hljs-params">df</span>.<span class="hljs-params">_c8</span>.<span class="hljs-params">astype</span>(<span class="hljs-string">&quot;float&quot;</span>)</span>)df = df.<span class="hljs-keyword">with</span><span class="hljs-constructor">Column(&#x27;<span class="hljs-params">_c9</span>&#x27;,<span class="hljs-params">df</span>.<span class="hljs-params">_c9</span>.<span class="hljs-params">astype</span>(<span class="hljs-string">&quot;float&quot;</span>)</span>)df = df.<span class="hljs-keyword">with</span><span class="hljs-constructor">Column(&#x27;<span class="hljs-params">_c10</span>&#x27;,<span class="hljs-params">df</span>.<span class="hljs-params">_c10</span>.<span class="hljs-params">astype</span>(<span class="hljs-string">&quot;float&quot;</span>)</span>)df = df.<span class="hljs-keyword">with</span><span class="hljs-constructor">Column(&#x27;<span class="hljs-params">_c11</span>&#x27;,<span class="hljs-params">df</span>.<span class="hljs-params">_c11</span>.<span class="hljs-params">astype</span>(<span class="hljs-string">&quot;float&quot;</span>)</span>)df = df.<span class="hljs-keyword">with</span><span class="hljs-constructor">Column(&#x27;<span class="hljs-params">_c12</span>&#x27;,<span class="hljs-params">df</span>.<span class="hljs-params">_c12</span>.<span class="hljs-params">astype</span>(<span class="hljs-string">&quot;float&quot;</span>)</span>)df = df.<span class="hljs-keyword">with</span><span class="hljs-constructor">Column(&#x27;<span class="hljs-params">_c13</span>&#x27;,<span class="hljs-params">df</span>.<span class="hljs-params">_c13</span>.<span class="hljs-params">astype</span>(<span class="hljs-string">&quot;float&quot;</span>)</span>)df = df.<span class="hljs-keyword">with</span><span class="hljs-constructor">Column(&#x27;<span class="hljs-params">_c14</span>&#x27;,<span class="hljs-params">df</span>.<span class="hljs-params">_c14</span>.<span class="hljs-params">astype</span>(<span class="hljs-string">&quot;float&quot;</span>)</span>)df.show<span class="hljs-literal">()</span></code></pre><p>将数据的每一列转换成float浮点数类型</p><pre><code class="hljs python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">feature_converter</span>(<span class="hljs-params">df</span>):</span>    <span class="hljs-string">&quot;&quot;&quot;</span><span class="hljs-string">        使用feature模块的VectorAssembler将特征值提取并合并</span><span class="hljs-string">    &quot;&quot;&quot;</span>    vecAss = VectorAssembler(inputCols = df.columns[<span class="hljs-number">1</span>:], outputCol= <span class="hljs-string">&#x27;features&#x27;</span>)    df_va = vecAss.transform(df)    <span class="hljs-keyword">return</span> df_va</code></pre><p>定义一个特征提取函数，将使用VectorAssembler提取特征值并合并重命名为features</p><pre><code class="hljs apache"><span class="hljs-attribute">train_data</span>, test_data = feature_converter(df).select(&#x27;features&#x27;,&#x27;_c<span class="hljs-number">14</span>&#x27;).randomSplit([<span class="hljs-number">7</span>.<span class="hljs-number">0</span>,<span class="hljs-number">3</span>.<span class="hljs-number">0</span>], <span class="hljs-number">101</span>)</code></pre><p>此处C_14为数据集中的CPI，特征提取完成后按照7-3划分训练集和测试集</p><h2 id="训练与评估"><a href="#训练与评估" class="headerlink" title="训练与评估"></a>训练与评估</h2><pre><code class="hljs routeros"><span class="hljs-comment"># 创建一个决策树对象</span>dt = DecisionTreeRegressor(<span class="hljs-attribute">maxDepth</span>=5, <span class="hljs-attribute">varianceCol</span>=<span class="hljs-string">&quot;variance&quot;</span>, <span class="hljs-attribute">labelCol</span>=<span class="hljs-string">&quot;_c14&quot;</span>)<span class="hljs-comment"># 使用训练集数据 进行训练</span>dt_model = dt.fit(train_data)</code></pre><p>使用ml模块的随机森林模型进行训练</p><pre><code class="hljs reasonml">dt_evaluator = <span class="hljs-constructor">RegressionEvaluator(<span class="hljs-params">labelCol</span>=&#x27;<span class="hljs-params">_c14</span>&#x27;,<span class="hljs-params">metricName</span>=<span class="hljs-string">&quot;rmse&quot;</span>,<span class="hljs-params">predictionCol</span>=&#x27;<span class="hljs-params">prediction</span>&#x27;)</span>rmse = dt_evaluator.evaluate(result)print(<span class="hljs-string">&quot;均方根的误差为：&quot;</span>,rmse)</code></pre><p>对模型进行评估，结果如下<br><img src="http://i2.tiimg.com/727535/dad143cedd82519b.png" alt="评估结果" title="评估结果"></p>]]></content>
    
    
    
    <tags>
      
      <tag>工作</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>helloworld</title>
    <link href="/2020/09/27/helloworld/"/>
    <url>/2020/09/27/helloworld/</url>
    
    <content type="html"><![CDATA[<p>welcome to my new blog, I will record my work here.</p>]]></content>
    
    
    
    <tags>
      
      <tag>杂</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
